# ============================
# ğŸ 1. Choisir lâ€™image de base
# ============================
FROM python:3.11-slim

# ============================
# ğŸ“ 2. DÃ©finir le dossier de travail dans le conteneur
# ============================
WORKDIR /app

# ============================
# ğŸ“¦ 3. Copier tous les fichiers de ton app dans le conteneur
# ============================
COPY . /app

# ============================
# ğŸ§° 4. Installer les dÃ©pendances
# ============================
RUN pip install --no-cache-dir --upgrade pip && \
    python -c "lines=open('/app/requirements.txt').read().splitlines(); \
               open('/app/requirements_docker.txt','w').write('\n'.join(l for l in lines if 'pywin32' not in l))" && \
    pip install --no-cache-dir -r /app/requirements_docker.txt

# ============================
# ğŸŒ 5. Exposer le port (5000 = port Flask)
# ============================
EXPOSE 5000

# ============================
# ğŸš€ 6. Lancer lâ€™application
# ============================
CMD ["python", "app.py"]
